\subsection{Login}
When a user vists the website they need to decide between logging in using their Feide account, or continue as an anonymous user. At this stage their user-rights level is 0, and they can only access the login page. Anonymous users have a user-rights level of 1, and are able to participate in sessions. If the users authenticates with their Feide account, they are assigned a user-rights level depending on their role in a given course. A normal user with no special rights will get their level set to 2. Level 3 is used for student assistants. Admins (lecturers, professors, ...) are assigned level 4. Users with a user-rights level above 1 are able to see statistics about sessions they have participated in. Student assistants (level 4) can.
% TODO: Add information about what student assisstants can do %.
Admins (level 4) can create courses, sessions and questions.
\subsubsection{Implementation}
If a user wants to be anonymous, their user-rights level is first set to 1. They are then redirected to the client page.
\\[11pt]
If the user clicks on the Feide login button, a HTTP POST request is sent to /login/feide. When the server recieves the request, it is passed on to PassportJS's authenticate function. The authenticate function redirects the user to an external site for authentication, before redirecting them back to the specificed callback URL on our site. The authenticate function takes an argument telling it where and how to redirect the user, this is called a strategy. The /login/feide route uses the "passport-openid-connect" strategy to connect to UNINETT's Dataporten authentication servers. If the user successfully login with their Feide account they are redirected back to /login/callback/feide. This route uses the PassportJS authenticate function to exchange the access code with an access token which is then passed on to our route handler. The handler reads the HTTP request to get information about their Feide account. This information is used to check the database and create a in-memory user object which the server uses to decide what the user is allowed to do on the server. The user is finally redirected to the /client route where they can join a session.